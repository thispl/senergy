{
 "accept_payment": 0,
 "allow_comments": 1,
 "allow_delete": 1,
 "allow_edit": 1,
 "allow_incomplete": 0,
 "allow_multiple": 1,
 "allow_print": 1,
 "amount": 0.0,
 "amount_based_on_field": 0,
 "breadcrumbs": "[{\"label\": \"Supplier Quotation\", \"route\":\"/supplier-quotation\" }]\r\n",
 "button_label": "Save",
 "client_script": "frappe.web_form.after_load = () => {\r\nvar container = {};\r\nlocation.search.split('&').toString().substr(1).split(\",\").forEach(item => {\r\n    container[item.split(\"=\")[0]] = decodeURIComponent(item.split(\"=\")[1]) ?  item.split(\"=\")[1]: \"No query strings available\" ;\r\n});\r\n\r\n}\r\n\r\nfunction set_supplier(user){\r\n    frappe.call({\r\n\t\t\tmethod: \"frappe.client.get_value\",\r\n\t\t\targs: {\r\n\t\t\t\tdoctype: \"User\",\r\n\t\t\t\tfilters: {\"email\": user},\r\n\t\t\t\tfieldname: \"supplier\"\r\n\t\t\t},\r\n\t\t\tcallback: function(r){\r\n\t\t\t\tfrappe.web_form.set_value('supplier',r.message.supplier)\r\n\t\t\t}\r\n\t\t});\r\n}\r\n\r\nfunction filter_rfq(supplier) {\r\n    var myurl = '/api/resource/Request%20for%20Quotation?filters=[[\"Request%20for%20Quotation%20Supplier\",\"supplier\",\"=\",\"'+ supplier +'\"]]';\r\n\t$.ajax({\r\n\t\ttype: 'GET', \r\n\t\turl: myurl,\r\n\t\tsuccess: function(result) {\r\n\t\t\tvar options = [];\r\n\t\t\tfor (var i = 0; i < result.data.length; i++) {\r\n\t\t\t\toptions.push({\r\n\t\t\t\t\t'label': result.data[i].name,\r\n\t\t\t\t\t'value': result.data[i].name\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tvar field = frappe.web_form.get_field(\"rfq\");\r\n\t\t\tfield._data = options;\r\n\t\t\tfield.refresh();\r\n\t\t}\r\n\t});\r\n};\r\n\r\nfrappe.web_form.on('rfq', (field, value) => {\r\nvar items = frappe.web_form.get_field(\"items\");\r\nif(items.grid.data.length <= 0){\r\nget_rfq_items(value)\r\n}\r\n});\r\n\r\nfunction get_rfq_items(rfq) {\r\n    var myurl = '/api/method/senergy.utils.get_rfq_items?rfq=' + rfq;\r\n\t$.ajax({\r\n\t\ttype: 'GET', \r\n\t\turl: myurl,\r\n\t\tsuccess: function(result) {\r\n\t\t    console.log(result)\r\n\t\t\tvar options = [];\r\n\t\t\tvar field = frappe.web_form.get_field(\"items\");\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < result['message'].length; i++) {\r\n\t\t\t    field.grid.add_new_row();\r\n\t\t\t\toptions.push({\r\n\t\t\t\t\t'label': result.message[i].name,\r\n\t\t\t\t\t'value': result.message[i].name\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tgrid_row_length = field.grid.df.data.length;\r\n\t    \tfor (var i = 0; i < grid_row_length; i++){\r\n\t\t\tfor (var i = 0; i < result['message'].length; i++) {\r\n\t\t\tfield.grid.df.data[i].item_code = result.message[i].item_code;\r\n\t\t\tfield.grid.df.data[i].qty = result.message[i].qty;\r\n\t\t\tfield.grid.df.data[i].warehouse = result.message[i].warehouse;\r\n\t\t\tfield.grid.df.data[i].item_name = result.message[i].item_name;\r\n\t\t\tfield.grid.df.data[i].request_for_quotation = rfq;\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t\tfield.refresh();\r\n\t\t}\r\n\t});\r\n};\r\n\r\n",
 "creation": "2020-08-22 19:28:01.180225",
 "currency": "KWD",
 "doc_type": "Supplier Quotation",
 "docstatus": 0,
 "doctype": "Web Form",
 "idx": 0,
 "introduction_text": "<p>Fill the below form to submit the quotation</p>",
 "is_standard": 1,
 "login_required": 1,
 "max_attachment_size": 0,
 "modified": "2020-08-30 10:23:17.910082",
 "modified_by": "Administrator",
 "module": "Senergy",
 "name": "supplier-quotation-test",
 "owner": "Administrator",
 "payment_button_label": "Buy Now",
 "published": 1,
 "route": "supplier-quotation",
 "route_to_success_link": 0,
 "show_attachments": 1,
 "show_in_grid": 1,
 "show_sidebar": 1,
 "sidebar_items": [
  {
   "enabled": 1,
   "reference_doctype": "Request for Quotation",
   "role": "Supplier",
   "route": "/request_for_quotation",
   "title": "Request for Quotation"
  }
 ],
 "success_url": "",
 "title": "Supplier Quotation",
 "web_form_fields": [
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "supplier_section",
   "fieldtype": "Section Break",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "options": "fa fa-user",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldtype": "Attach",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "supplier",
   "fieldtype": "Link",
   "hidden": 0,
   "label": "Supplier",
   "max_length": 0,
   "max_value": 0,
   "options": "Supplier",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "column_break1",
   "fieldtype": "Column Break",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "valid_till",
   "fieldtype": "Date",
   "hidden": 0,
   "label": "Valid Till",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "details",
   "fieldtype": "Section Break",
   "hidden": 0,
   "label": "Details",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 1,
   "fieldname": "rfq",
   "fieldtype": "Link",
   "hidden": 0,
   "label": "Request for Quotation",
   "max_length": 0,
   "max_value": 0,
   "options": "Request for Quotation",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "items",
   "fieldtype": "Table",
   "hidden": 0,
   "label": "Items",
   "max_length": 0,
   "max_value": 0,
   "options": "Supplier Quotation Item",
   "read_only": 0,
   "reqd": 1,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "",
   "fieldtype": "Section Break",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "mode_of_payment",
   "fieldtype": "Select",
   "hidden": 0,
   "label": "Mode of Payment",
   "max_length": 0,
   "max_value": 0,
   "options": "Cash\nBank\nCheque",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "inco_terms",
   "fieldtype": "Small Text",
   "hidden": 0,
   "label": "INCO Terms",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "credit_days",
   "fieldtype": "Int",
   "hidden": 0,
   "label": "Credit Days",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "advance_required",
   "fieldtype": "Check",
   "hidden": 0,
   "label": "Advance Required",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "",
   "fieldtype": "Column Break",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "product_description",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "Product Description",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "payment_terms",
   "fieldtype": "Small Text",
   "hidden": 0,
   "label": "Payment Terms",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "shipping_rule",
   "fieldtype": "Link",
   "hidden": 0,
   "label": "Shipping Rule",
   "max_length": 0,
   "max_value": 0,
   "options": "Shipping Rule",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "",
   "fieldtype": "Section Break",
   "hidden": 0,
   "label": "Quantity and Amount",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "total_qty",
   "fieldtype": "Float",
   "hidden": 0,
   "label": "Total Quantity",
   "max_length": 0,
   "max_value": 0,
   "read_only": 1,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "",
   "fieldtype": "Column Break",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "total",
   "fieldtype": "Currency",
   "hidden": 0,
   "label": "Total",
   "max_length": 0,
   "max_value": 0,
   "options": "currency",
   "read_only": 1,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "",
   "fieldtype": "Column Break",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "net_total",
   "fieldtype": "Currency",
   "hidden": 0,
   "label": "Net Total",
   "max_length": 0,
   "max_value": 0,
   "options": "currency",
   "read_only": 1,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "section_break_41",
   "fieldtype": "Section Break",
   "hidden": 0,
   "label": "Additional Discount",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "default": "Grand Total",
   "fieldname": "apply_discount_on",
   "fieldtype": "Select",
   "hidden": 0,
   "label": "Apply Additional Discount On",
   "max_length": 0,
   "max_value": 0,
   "options": "\nGrand Total\nNet Total",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "column_break_43",
   "fieldtype": "Column Break",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "additional_discount_percentage",
   "fieldtype": "Float",
   "hidden": 0,
   "label": "Additional Discount Percentage",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "",
   "fieldtype": "Column Break",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "discount_amount",
   "fieldtype": "Currency",
   "hidden": 0,
   "label": "Additional Discount Amount",
   "max_length": 0,
   "max_value": 0,
   "options": "currency",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "section_break_46",
   "fieldtype": "Section Break",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "grand_total",
   "fieldtype": "Currency",
   "hidden": 0,
   "label": "Grand Total",
   "max_length": 0,
   "max_value": 0,
   "options": "currency",
   "read_only": 1,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "rounding_adjustment",
   "fieldtype": "Currency",
   "hidden": 0,
   "label": "Rounding Adjustment",
   "max_length": 0,
   "max_value": 0,
   "options": "currency",
   "read_only": 1,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "",
   "fieldtype": "Column Break",
   "hidden": 0,
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "rounded_total",
   "fieldtype": "Currency",
   "hidden": 0,
   "label": "Rounded Total",
   "max_length": 0,
   "max_value": 0,
   "read_only": 1,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "in_words",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "In Words",
   "max_length": 0,
   "max_value": 0,
   "read_only": 1,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "terms_section_break",
   "fieldtype": "Section Break",
   "hidden": 0,
   "label": "Terms and Conditions",
   "max_length": 0,
   "max_value": 0,
   "options": "fa fa-legal",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  },
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "terms",
   "fieldtype": "Text Editor",
   "hidden": 0,
   "label": "",
   "max_length": 0,
   "max_value": 0,
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  }
 ]
}